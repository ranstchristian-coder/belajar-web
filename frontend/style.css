/* ===========================
   YuRa Personal Finance - style.css (FULL)
   - Rapi & padat (fit 1 layar)
   - Daftar transaksi scrollable
   - Theme: light/dark/blue/green
   - Density: Normal / Compact / Super
   =========================== */

/* ---------- Reset & base ---------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { font-size: 15px; } /* ukuran dasar */
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  color: var(--text);
  background: var(--bg);
  line-height: 1.35;
}

/* ---------- Themes ---------- */
:root {
  --bg: #f7fafc;
  --card: #ffffff;
  --card-border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --primary: #2563eb;
  --primary-contrast: #ffffff;
  --accent: #10b981;
  --danger: #ef4444;
  --shadow: 0 4px 16px rgba(0,0,0,0.06);
}

body[data-theme="dark"] {
  --bg: #0b1220;
  --card: #0f172a;
  --card-border: #1f2937;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --primary: #60a5fa;
  --primary-contrast: #0b1220;
  --accent: #34d399;
  --danger: #f87171;
  --shadow: 0 4px 16px rgba(0,0,0,0.35);
}
body[data-theme="blue"] {
  --bg: #eef5ff;
  --card: #ffffff;
  --card-border: #dbeafe;
  --text: #0f172a;
  --muted: #475569;
  --primary: #2563eb;
  --primary-contrast: #ffffff;
  --accent: #38bdf8;
  --danger: #ef4444;
}
body[data-theme="green"] {
  --bg: #effef7;
  --card: #ffffff;
  --card-border: #d1fae5;
  --text: #052e26;
  --muted: #0e6253;
  --primary: #059669;
  --primary-contrast: #ffffff;
  --accent: #34d399;
  --danger: #dc2626;
}

/* ---------- Layout ---------- */
/* Full-width container (melebar sampai tepi layar) */
.container {
  max-width: 1600px;     /* atau 1440px */
  width: 100%;
  margin: 18px auto;     /* center lagi tapi lebih lebar dari 1100 */
  padding: 0 20px;

}

/* Opsional: biar makin lebar di desktop besar tapi tetap ada “gutter” yang enak */
@media (min-width: 1280px) {
  .container { padding: 0 28px; }
}
@media (min-width: 1536px) {
  .container { padding: 0 36px; }
}


header {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 8px;
  align-items: center;
  margin-bottom: 12px;
}
header h1 {
  margin: 0;
  font-size: 1.1rem;
  letter-spacing: .2px;
}
.user-controls { display: flex; align-items: center; gap: 6px; }
#userInfo { color: var(--muted); font-size: .85rem; }

.card {
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 12px;
  margin-bottom: 12px;
}

.card-header {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--card);
  padding: 8px 12px;
  margin: -12px -12px 10px;
  border-bottom: 1px solid var(--card-border);
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
}

/* Utilities */
.flex { display: flex; }
.items-center { align-items: center; }
.gap-2 { gap: 8px; }
.mt-3 { margin-top: 10px; }
.ml-auto { margin-left: auto; }
.muted { color: var(--muted); }

/* ---------- KPI Grid ---------- */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap: 10px;
  margin-top: 2px;
}
.kpi.tile {
  background: linear-gradient(180deg, rgba(0,0,0,0.00), rgba(0,0,0,0.03));
  border: 1px solid var(--card-border);
  border-radius: 10px;
  padding: 10px 12px;
}
.kpi h3 {
  margin: 0 0 4px;
  font-size: .85rem;
  color: var(--muted);
}
.kpi div {
  font-weight: 700;
  font-size: 1.05rem;
}

/* ---------- Dashboard extra (charts) ---------- */
.dashboard-extra {
  display: grid;
  grid-template-columns: 1fr 1.1fr;
  gap: 10px;
  margin-top: 8px;
}
.chart-card h3 { margin: 0 0 6px; font-size: .95rem; }
.top-cat-list { list-style: none; padding: 0; margin: 6px 0 0; }
.top-cat-list li {
  display: flex; justify-content: space-between;
  padding: 6px 8px;
  border: 1px solid var(--card-border);
  border-radius: 8px; margin-bottom: 6px;
  font-size: .85rem;
}
.top-cat-list .cat { color: var(--text); }
.top-cat-list .pct { color: var(--muted); }

/* ---------- Forms (ramping) ---------- */
.form-row {
  display: grid;
  grid-template-columns: 96px 1fr; /* label lebih sempit */
  gap: 8px;
  align-items: center;
  margin-bottom: 6px;
}
.form-row label { color: var(--muted); font-size: .85rem; }
input[type="number"], input[type="text"], input[type="date"], select {
  width: 100%;
  padding: 7px 9px;
  border-radius: 9px;
  border: 1px solid var(--card-border);
  background: var(--bg);
  color: var(--text);
  outline: none;
  font-size: .92rem;
  height: 34px;
}
input::placeholder { color: #9ca3af; font-size: .9rem; }

/* ---------- Buttons ---------- */
.btn {
  border: 1px solid transparent;
  border-radius: 9px;
  padding: 7px 10px;
  cursor: pointer;
  background: var(--primary);
  color: var(--primary-contrast);
  font-weight: 600;
  font-size: .9rem;
  box-shadow: 0 1px 8px rgba(0,0,0,.06);
}
.btn.primary { background: var(--primary); color: var(--primary-contrast); }
.btn.outlined {
  background: transparent; color: var(--text);
  border: 1px solid var(--card-border);
}
.btn.small { font-size: .8rem; padding: 5px 8px; }
.btn.danger { color: var(--danger); border-color: rgba(239,68,68,.4); }
.btn.full { width: 100%; margin-top: 4px; }
.mini-btn-group { display: flex; gap: 6px; }

/* ---------- Two-column row ---------- */
.flex-row {
  display: grid;
  grid-template-columns: 0.9fr 0.9fr;  /* kolom form lebih kecil */
  gap: 10px;
}

/* ---------- Totals & Undo ---------- */
.totals {
  display: grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 10px;
  font-size: .95rem;
}
.undo-bar { display: flex; gap: 8px; align-items: center; }

/* ---------- Transaction lists (COMPACT + SCROLL) ---------- */
.tx-list {
  list-style: none;
  padding: 0;
  margin: 0;

  max-height: 260px;       /* scroll agar muat layar */
  overflow-y: auto;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  border: 1px solid var(--card-border);
  border-radius: 9px;
}

/* scrollbar WebKit */
.tx-list::-webkit-scrollbar { width: 9px; }
.tx-list::-webkit-scrollbar-track { background: transparent; }
.tx-list::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,.15);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: content-box;
}
body[data-theme="dark"] .tx-list::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,.25);
  border: 2px solid transparent;
  background-clip: content-box;
}

.tx-item {
  display: flex;
  align-items: center;
  justify-content: space-between;

  padding: 7px 9px;
  gap: 8px;
  border-bottom: 1px dashed var(--card-border);
  font-size: .9rem;
  line-height: 1.15;
}
.tx-item:last-child { border-bottom: none; }
.tx-item strong { font-size: .95rem; }
.tx-meta { color: var(--muted); font-size: .8rem; margin-top: 2px; }
.tx-item .actions { display: flex; gap: 6px; }

/* ---------- Charts ---------- */
canvas { width: 100% !important; background: transparent; }
.chart-card { padding-bottom: 8px; }
.weekly-total { font-size: .9rem; }

/* ---------- Export section ---------- */
.export-section .filters { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.export-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

/* ---------- Modal ---------- */
.modal {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.45);
  display: flex; align-items: center; justify-content: center;
  padding: 16px;
}
.modal.hidden { display: none; }
.modal-content {
  width: 100%; max-width: 480px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 12px;
  box-shadow: var(--shadow);
}
.modal-content h3 { margin: 0 0 8px; font-size: 1rem; }

/* ---------- Theme selector ---------- */
.theme-selector select {
  padding: 7px 9px;
  border-radius: 9px;
  border: 1px solid var(--card-border);
  background: var(--bg);
  color: var(--text);
  height: 34px;
  font-size: .92rem;
}

/* ---------- Header right / Density control ---------- */
.header-right { display: flex; align-items: center; gap: 8px; }
.header-right .density { display: inline-flex; align-items: center; gap: 6px; }
.header-right .density .label { font-size: .85rem; color: var(--muted); }
#densitySelect {
  padding: 6px 9px;
  border-radius: 9px;
  border: 1px solid var(--card-border);
  background: var(--bg);
  color: var(--text);
  height: 34px;
  font-size: .92rem;
}

/* ====== DENSITY: COMPACT overrides ====== */
body[data-density="compact"] .card { padding: 10px; border-radius: 10px; }
body[data-density="compact"] .card-header { padding: 6px 10px; margin: -10px -10px 8px; }
body[data-density="compact"] header h1 { font-size: 1rem; }
body[data-density="compact"] .kpi.tile { padding: 8px 10px; }
body[data-density="compact"] .kpi h3 { font-size: .8rem; margin-bottom: 3px; }
body[data-density="compact"] .kpi div { font-size: 1rem; }
body[data-density="compact"] .dashboard-extra { gap: 8px; }
body[data-density="compact"] .chart-card h3 { font-size: .9rem; margin-bottom: 4px; }
body[data-density="compact"] .weekly-total { font-size: .85rem; }
body[data-density="compact"] .form-row { grid-template-columns: 86px 1fr; gap: 6px; margin-bottom: 5px; }
body[data-density="compact"] input[type="number"],
body[data-density="compact"] input[type="text"],
body[data-density="compact"] input[type="date"],
body[data-density="compact"] select {
  height: 32px; padding: 6px 8px; font-size: .88rem; border-radius: 8px;
}
body[data-density="compact"] .btn { padding: 6px 9px; font-size: .85rem; border-radius: 8px; }
body[data-density="compact"] .btn.small { padding: 4px 7px; font-size: .78rem; }
body[data-density="compact"] .tx-list { max-height: 220px; }
body[data-density="compact"] .tx-item { padding: 6px 8px; font-size: .86rem; }
body[data-density="compact"] .tx-item strong { font-size: .92rem; }
body[data-density="compact"] .tx-meta { font-size: .76rem; }
body[data-density="compact"] .totals { gap: 8px; }

/* ====== DENSITY: SUPER COMPACT overrides ====== */
body[data-density="super"] { --_fs: 13.5px; }
body[data-density="super"] html { font-size: var(--_fs); }
body[data-density="super"] header h1 { font-size: .95rem; }
body[data-density="super"] .card { padding: 8px; border-radius: 9px; }
body[data-density="super"] .card-header { padding: 5px 8px; margin: -8px -8px 6px; }
body[data-density="super"] .kpi.tile { padding: 6px 8px; }
body[data-density="super"] .kpi h3 { font-size: .75rem; margin-bottom: 2px; }
body[data-density="super"] .kpi div { font-size: .95rem; }
body[data-density="super"] .dashboard-extra { gap: 6px; }
body[data-density="super"] .chart-card h3 { font-size: .85rem; margin-bottom: 3px; }
body[data-density="super"] .weekly-total { font-size: .8rem; }

body[data-density="super"] .form-row { grid-template-columns: 80px 1fr; gap: 5px; margin-bottom: 4px; }
body[data-density="super"] .form-row label { font-size: .78rem; }
body[data-density="super"] input[type="number"],
body[data-density="super"] input[type="text"],
body[data-density="super"] input[type="date"],
body[data-density="super"] select {
  height: 30px; padding: 5px 7px; font-size: .84rem; border-radius: 7px;
}

body[data-density="super"] .btn { padding: 5px 8px; font-size: .8rem; border-radius: 7px; }
body[data-density="super"] .btn.small { padding: 4px 6px; font-size: .75rem; }

body[data-density="super"] .tx-list { max-height: 190px; }
body[data-density="super"] .tx-item { padding: 5px 7px; font-size: .82rem; }
body[data-density="super"] .tx-item strong { font-size: .9rem; }
body[data-density="super"] .tx-meta { font-size: .72rem; }
body[data-density="super"] .totals { gap: 6px; }

/* ---------- Responsive ---------- */
@media (max-width: 1100px) {
  .kpi-grid { grid-template-columns: repeat(4, minmax(0,1fr)); }
  .dashboard-extra { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 980px) {
  .kpi-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .dashboard-extra { grid-template-columns: 1fr; }
}
@media (max-width: 780px) {
  .flex-row { grid-template-columns: 1fr; }
  header { grid-template-columns: 1fr; gap: 6px; }
  .totals { grid-template-columns: 1fr; }
}
/* ---- util: angka negatif ---- */
.neg { color: #b91c1c; } /* merah */

/* === negatif: teks merah === */
:root { --neg-text: #b91c1c; } /* bisa ganti sesuai tema */
.neg { color: var(--neg-text) !important; }

/* ========= DENSITY SYSTEM (Normal/Cozy/Compact) ========= */
/* Skala default */
:root{
  --density-font-scale: 1;
  --density-space-scale: 1;
  --density-radius: 14px;
  --density-sidebar-w: 320px;
  --neg-text: #b91c1c; /* untuk angka minus (sudah kita pakai sebelumnya) */
}

/* Cozy: sedikit lebih padat */
[data-density="cozy"]{
  --density-font-scale: .97;
  --density-space-scale: .90;
  --density-radius: 12px;
  --density-sidebar-w: 280px;
}

/* Compact: padat seperti referensi dashboard */
[data-density="compact"]{
  --density-font-scale: .92;
  --density-space-scale: .80;
  --density-radius: 10px;
  --density-sidebar-w: 260px;
}

/* Penerapan global */
body{
  font-size: calc(14px * var(--density-font-scale));
}

/* Topbar, tombol, input, kartu, panel */
.topbar{ padding: calc(10px * var(--density-space-scale)) calc(14px * var(--density-space-scale)); }
.btn{ padding: calc(8px * var(--density-space-scale)) calc(12px * var(--density-space-scale)); border-radius: var(--density-radius); }
.field input, .field select{ padding: calc(10px * var(--density-space-scale)); border-radius: var(--density-radius); }
.panel, .card, .kpi{ border-radius: var(--density-radius); padding: calc(12px * var(--density-space-scale)); }
.kpis{ gap: calc(12px * var(--density-space-scale)); }
.charts{ gap: calc(12px * var(--density-space-scale)); }
.layout{ gap: calc(16px * var(--density-space-scale)); grid-template-columns: var(--density-sidebar-w) 1fr; }

/* Tabel lebih padat */
.list th, .list td{ padding: calc(8px * var(--density-space-scale)); }
.list tr:hover{ filter: brightness(0.98); }

/* Judul & heading */
.card h3, .kpi-value{ margin: 0 0 calc(6px * var(--density-space-scale)); }
.kpi-value{ font-size: calc(20px * var(--density-font-scale)); }

/* Logo & kontrol topbar sedikit mengecil saat compact */
[data-density="compact"] .logo{ width: 32px; height: 32px; }
[data-density="compact"] .titles h1{ font-size: 16px; }

/* Negatif merah di UI */
.neg{ color: var(--neg-text) !important; }

/* (Opsional) ringankan shadow saat compact */
[data-density="compact"] .card, 
[data-density="compact"] .panel, 
[data-density="compact"] .kpi{ box-shadow: 0 6px 18px rgba(0,0,0,.06); }

/* === Slim size for main bar chart === */
#combinedChart{
  display: block;
  width: 100% !important;
  height: 280px !important;   /* desktop height */
  max-height: 280px;
}

@media (max-width: 768px){
  #combinedChart{
    height: 220px !important; /* mobile height */
    max-height: 220px;
  }
}
/* === Scale down KPI Dashboard === */
.kpi-grid {
  gap: 10px;            /* default 16–20px, kecilkan jadi 10px */
}

.kpi-card {
  padding: 10px 12px;   /* default 16–20px, kecilkan jadi 10–12px */
  border-radius: 12px;  /* opsional: kecilkan sudut jika tampak besar */
}

.kpi-card .title,
#kpi-income-title, #kpi-expense-title, #kpi-balance-title, #kpi-count-title {
  font-size: 0.85rem;   /* judul lebih ringkas */
}

.kpi-card .value,
#kpi-income-val, #kpi-expense-val, #kpi-balance-val, #kpi-count-val {
  font-size: 1.05rem;   /* angka KPI; turunkan dari ~1.25–1.4rem */
  line-height: 1.2;
}
